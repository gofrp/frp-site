<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>服务端插件 | frp</title>
<meta name="description" content="frp 服务端插件的作用是在不侵入自身代码的前提下，扩展 frp 服务端的能力。
frp 服务端插件会以单独进程的形式运行，并且监听在一个端口上，对外提供 RPC 接口，响应 frps 的请求。
frps 在执行某些操作前，会根据配置向服务端插件发送 RPC 请求，根据插件的响应来执行相应的操作。
RPC 请求 服务端插件接收到操作请求后，可以给出三种回应。
拒绝操作，需要返回拒绝操作的原因。 允许操作，不需要修改操作内容。 允许操作，对操作请求进行修改后，返回修改后的内容。 接口 接口路径可以在 frps 配置中为每个插件单独配置，这里以 /handler 为例。
Request
POST /handler?version=0.1.0&amp;op=Login { &#34;content&#34;: { ... // 具体的操作信息 } } 请求 Header X-Frp-Reqid: 用于追踪请求 Response
非 200 的返回都认为是请求异常。
拒绝执行操作
{ &#34;reject&#34;: true, &#34;reject_reason&#34;: &#34;invalid user&#34; } 允许且内容不需要变动
{ &#34;reject&#34;: false, &#34;unchange&#34;: true } 允许且需要替换操作内容
{ &#34;unchange&#34;: false, &#34;content&#34;: { ... // 替换后的操作信息，格式必须和请求时的一致 } } 操作类型 目前插件支持管理的操作类型有 Login、NewProxy、CloseProxy、Ping、NewWorkConn 和 NewUserConn。">
<meta property="og:url" content="/zh-cn/docs/features/common/server-plugin/">
  <meta property="og:site_name" content="frp">
  <meta property="og:title" content="服务端插件">
  <meta property="og:description" content="frp 服务端插件的作用是在不侵入自身代码的前提下，扩展 frp 服务端的能力。
frp 服务端插件会以单独进程的形式运行，并且监听在一个端口上，对外提供 RPC 接口，响应 frps 的请求。
frps 在执行某些操作前，会根据配置向服务端插件发送 RPC 请求，根据插件的响应来执行相应的操作。
RPC 请求 服务端插件接收到操作请求后，可以给出三种回应。
拒绝操作，需要返回拒绝操作的原因。 允许操作，不需要修改操作内容。 允许操作，对操作请求进行修改后，返回修改后的内容。 接口 接口路径可以在 frps 配置中为每个插件单独配置，这里以 /handler 为例。
Request
POST /handler?version=0.1.0&amp;op=Login { &#34;content&#34;: { ... // 具体的操作信息 } } 请求 Header X-Frp-Reqid: 用于追踪请求 Response
非 200 的返回都认为是请求异常。
拒绝执行操作
{ &#34;reject&#34;: true, &#34;reject_reason&#34;: &#34;invalid user&#34; } 允许且内容不需要变动
{ &#34;reject&#34;: false, &#34;unchange&#34;: true } 允许且需要替换操作内容
{ &#34;unchange&#34;: false, &#34;content&#34;: { ... // 替换后的操作信息，格式必须和请求时的一致 } } 操作类型 目前插件支持管理的操作类型有 Login、NewProxy、CloseProxy、Ping、NewWorkConn 和 NewUserConn。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2025-07-18T10:53:06+08:00">

  <meta itemprop="name" content="服务端插件">
  <meta itemprop="description" content="frp 服务端插件的作用是在不侵入自身代码的前提下，扩展 frp 服务端的能力。
frp 服务端插件会以单独进程的形式运行，并且监听在一个端口上，对外提供 RPC 接口，响应 frps 的请求。
frps 在执行某些操作前，会根据配置向服务端插件发送 RPC 请求，根据插件的响应来执行相应的操作。
RPC 请求 服务端插件接收到操作请求后，可以给出三种回应。
拒绝操作，需要返回拒绝操作的原因。 允许操作，不需要修改操作内容。 允许操作，对操作请求进行修改后，返回修改后的内容。 接口 接口路径可以在 frps 配置中为每个插件单独配置，这里以 /handler 为例。
Request
POST /handler?version=0.1.0&amp;op=Login { &#34;content&#34;: { ... // 具体的操作信息 } } 请求 Header X-Frp-Reqid: 用于追踪请求 Response
非 200 的返回都认为是请求异常。
拒绝执行操作
{ &#34;reject&#34;: true, &#34;reject_reason&#34;: &#34;invalid user&#34; } 允许且内容不需要变动
{ &#34;reject&#34;: false, &#34;unchange&#34;: true } 允许且需要替换操作内容
{ &#34;unchange&#34;: false, &#34;content&#34;: { ... // 替换后的操作信息，格式必须和请求时的一致 } } 操作类型 目前插件支持管理的操作类型有 Login、NewProxy、CloseProxy、Ping、NewWorkConn 和 NewUserConn。">
  <meta itemprop="dateModified" content="2025-07-18T10:53:06+08:00">
  <meta itemprop="wordCount" content="370">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="服务端插件">
  <meta name="twitter:description" content="frp 服务端插件的作用是在不侵入自身代码的前提下，扩展 frp 服务端的能力。
frp 服务端插件会以单独进程的形式运行，并且监听在一个端口上，对外提供 RPC 接口，响应 frps 的请求。
frps 在执行某些操作前，会根据配置向服务端插件发送 RPC 请求，根据插件的响应来执行相应的操作。
RPC 请求 服务端插件接收到操作请求后，可以给出三种回应。
拒绝操作，需要返回拒绝操作的原因。 允许操作，不需要修改操作内容。 允许操作，对操作请求进行修改后，返回修改后的内容。 接口 接口路径可以在 frps 配置中为每个插件单独配置，这里以 /handler 为例。
Request
POST /handler?version=0.1.0&amp;op=Login { &#34;content&#34;: { ... // 具体的操作信息 } } 请求 Header X-Frp-Reqid: 用于追踪请求 Response
非 200 的返回都认为是请求异常。
拒绝执行操作
{ &#34;reject&#34;: true, &#34;reject_reason&#34;: &#34;invalid user&#34; } 允许且内容不需要变动
{ &#34;reject&#34;: false, &#34;unchange&#34;: true } 允许且需要替换操作内容
{ &#34;unchange&#34;: false, &#34;content&#34;: { ... // 替换后的操作信息，格式必须和请求时的一致 } } 操作类型 目前插件支持管理的操作类型有 Login、NewProxy、CloseProxy、Ping、NewWorkConn 和 NewUserConn。">




<link rel="preload" href="/scss/main.min.d093e3ad0a03b465f821568aa483a85a582d17b7bf93895ce147736c5beafd9a.css" as="style">
<link href="/scss/main.min.d093e3ad0a03b465f821568aa483a85a582d17b7bf93895ce147736c5beafd9a.css" rel="stylesheet" integrity="">

<script
  src="/js/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script
  src="/js/lunr-2.3.9.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<script src="/js/language-switcher.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
      var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?3e71b775dd51aa4d6720c9f6e0dca126";
          var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
})();
</script>



  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/zh-cn/"><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 196 196"><path d="M0 0C1.55372433 1.34031496 3.09552869 2.69457421 4.625 4.0625c.82886719.68707031 1.65773437 1.37414062 2.51171875 2.08203125C25.42258854 21.68612043 36.54980032 44.43390409 39.3125 68.125c2.07030459 26.82769694-4.71759167 51.88460621-21.6875 72.9375C16.95984375 141.89265625 16.2946875 142.7228125 15.609375 143.578125-.48954121 162.53907075-23.36088313 173.85843847-47.9453125 176.78515625-71.93322964 178.72495365-97.49538979 173.22783488-116.75 158.125-118.30372433 156.78468504-119.84552869 155.43042579-121.375 154.0625-122.20386719 153.37542969-123.03273437 152.68835938-123.88671875 151.98046875-142.17258854 136.43887957-153.29980032 113.69109591-156.0625 90-158.13280459 63.17230306-151.34490833 38.11539379-134.375 17.0625-133.70984375 16.23234375-133.0446875 15.4021875-132.359375 14.546875-116.26045879-4.41407075-93.38911687-15.73343847-68.8046875-18.66015625-44.81677036-20.59995365-19.25461021-15.10283488.0.0z" fill="#307fec" transform="translate(156.375,18.9375)"/><path d="M0 0C9.14866886.037533 17.22012512 2.42754171 25.875 5.3125 25.24816224 9.20323238 24.06490291 12.41180682 22.40625 15.98046875 21.91769531 17.03814453 21.42914063 18.09582031 20.92578125 19.18554688 20.41402344 20.27931641 19.90226562 21.37308594 19.375 22.5 18.86324219 23.60537109 18.35148437 24.71074219 17.82421875 25.84960938 14.22879464 33.60491071 14.22879464 33.60491071 12.875 36.3125c6.6.0 13.2.0 20 0-2.74311757 8.2293527-5.81983443 14.5072504-10 22-6.6.0-13.2.0-20 0-.66 1.98-1.32 3.96-2 6C-.30574675 66.89295828-1.51012196 69.4485972-2.75 72-7.20837762 81.30592927-11.1713474 90.78137319-15.125 100.3125c-11.55.0-23.1.0-35 0 1.12511809-6.75070855 1.12511809-6.75070855 2.92578125-10.4609375C-46.81443359 89.04976563-46.42964844 88.24796875-46.03320312 87.421875-45.63037109 86.60203125-45.22753906 85.7821875-44.8125 84.9375-44.42126953 84.12539062-44.03003906 83.31328125-43.62695312 82.4765625c1.48804651-3.07973806 2.98287133-6.15404921 4.54638671-9.19628906C-37.35389762 69.91812423-35.79432282 66.56321047-34.42578125 63.0390625-31.06119644 54.44632958-27.11915997 46.09069224-23.3125 37.6875c1.57027085-3.47078555 3.13906321-6.94223608 4.70703125-10.4140625C-18.22574921 26.43367371-17.84602966 25.59390991-17.45480347 24.72869873c2.79794821-6.20059747 5.53869159-12.4246724 8.22062683-18.67636108C-6.76291797.33468549-6.2733019.13332521.0.0z" fill="#fcfdfe" transform="translate(86.125,50.6875)"/><path d="M0 0C5.49110072-.07550699 10.98188377-.12922511 16.47338867-.16479492c1.85877765-.01486511 3.71752171-.03516313 5.57617188-.06152344C56.20891765-.69780069 56.20891765-.69780069 69 7 69.88558594 7.51433594 69.88558594 7.51433594 70.7890625 8.0390625 73.62173603 9.79773659 75.12383176 11.18574763 77 14c.265625 2.92578125.265625 2.92578125.25 6.3125C77.25773437 21.97732422 77.25773437 21.97732422 77.265625 23.67578125 77 27 77 27 75 33c-11.55.0-23.1.0-35 0C40.33 31.02 40.66 29.04 41 27 41.92939473 18.83651171 41.92939473 18.83651171 39 11.5 30.21072208 4.17560173 20.01523416 2.92347445 8.9375 1.875c-.86560547-.08636719-1.73121094-.17273437-2.62304688-.26171875C4.21011156 1.40400971 2.10511876 1.20130332.0 1 0 .67.0.34.0.0z" fill="#f8fafe" transform="translate(83,45)"/></svg></span><span class="navbar-brand__name">frp</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/zh-cn/docs/"><span>文档</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/zh-cn/release/"><span>版本历史</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/fatedier/frp" target="_blank" rel="noopener"><i class='fab fa-github'></i><span>Github</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/en/docs/features/common/server-plugin/">English</a></li>
    </ul>
</div></li>
      <li class="td-light-dark-menu nav-item dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check2" viewBox="0 0 16 16">
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
  </symbol>
  <symbol id="circle-half" viewBox="0 0 16 16">
    <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
  </symbol>
  <symbol id="moon-stars-fill" viewBox="0 0 16 16">
    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
  </symbol>
  <symbol id="sun-fill" viewBox="0 0 16 16">
    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
  </symbol>
</svg>

<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        data-bs-display="static"
        aria-label="Toggle theme (auto)">
  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg>
</button>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#sun-fill"></use></svg>
      Light
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"></use></svg>
      Dark
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
      <svg class="bi me-2 opacity-50"><use href="#circle-half"></use></svg>
      Auto
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
</ul>

      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="站内搜索…"
    aria-label="站内搜索…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.0483677cb3643b0a6c699bb3c99bbd61.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="站内搜索…"
    aria-label="站内搜索…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.0483677cb3643b0a6c699bb3c99bbd61.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse foldable-nav" id="td-section-nav">
    <div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none">
      <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/en/docs/features/common/server-plugin/">English</a></li>
    </ul>
</div>
    </div>
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-zh-cndocs-li">
  <a href="/zh-cn/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-zh-cndocs"><span class="">文档</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsoverview-li">
  <input type="checkbox" id="m-zh-cndocsoverview-check"/>
  <label for="m-zh-cndocsoverview-check"><a href="/zh-cn/docs/overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsoverview"><span class="">概览</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-zh-cndocssetup-li">
  <input type="checkbox" id="m-zh-cndocssetup-check"/>
  <label for="m-zh-cndocssetup-check"><a href="/zh-cn/docs/setup/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocssetup"><span class="">安装</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocssetupsystemd-li">
  <input type="checkbox" id="m-zh-cndocssetupsystemd-check"/>
  <label for="m-zh-cndocssetupsystemd-check"><a href="/zh-cn/docs/setup/systemd/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocssetupsystemd"><span class="">使用 systemd</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsconcepts-li">
  <input type="checkbox" id="m-zh-cndocsconcepts-check"/>
  <label for="m-zh-cndocsconcepts-check"><a href="/zh-cn/docs/concepts/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsconcepts"><span class="">概念</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-zh-cndocsexamples-li">
  <input type="checkbox" id="m-zh-cndocsexamples-check"/>
  <label for="m-zh-cndocsexamples-check"><a href="/zh-cn/docs/examples/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsexamples"><span class="">示例</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesssh-li">
  <input type="checkbox" id="m-zh-cndocsexamplesssh-check"/>
  <label for="m-zh-cndocsexamplesssh-check"><a href="/zh-cn/docs/examples/ssh/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesssh"><span class="">通过 SSH 访问内网机器</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesmultiple-ssh-over-same-port-li">
  <input type="checkbox" id="m-zh-cndocsexamplesmultiple-ssh-over-same-port-check"/>
  <label for="m-zh-cndocsexamplesmultiple-ssh-over-same-port-check"><a href="/zh-cn/docs/examples/multiple-ssh-over-same-port/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesmultiple-ssh-over-same-port"><span class="">多个 SSH 服务复用同一端口</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesvhost-http-li">
  <input type="checkbox" id="m-zh-cndocsexamplesvhost-http-check"/>
  <label for="m-zh-cndocsexamplesvhost-http-check"><a href="/zh-cn/docs/examples/vhost-http/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesvhost-http"><span class="">通过自定义域名访问内网的 Web 服务</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesdns-li">
  <input type="checkbox" id="m-zh-cndocsexamplesdns-check"/>
  <label for="m-zh-cndocsexamplesdns-check"><a href="/zh-cn/docs/examples/dns/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesdns"><span class="">转发 DNS 查询请求</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesunix-domain-socket-li">
  <input type="checkbox" id="m-zh-cndocsexamplesunix-domain-socket-check"/>
  <label for="m-zh-cndocsexamplesunix-domain-socket-check"><a href="/zh-cn/docs/examples/unix-domain-socket/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesunix-domain-socket"><span class="">转发 Unix 域套接字</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesstatic-file-li">
  <input type="checkbox" id="m-zh-cndocsexamplesstatic-file-check"/>
  <label for="m-zh-cndocsexamplesstatic-file-check"><a href="/zh-cn/docs/examples/static-file/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesstatic-file"><span class="">对外提供简单的文件访问服务</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexampleshttps2http-li">
  <input type="checkbox" id="m-zh-cndocsexampleshttps2http-check"/>
  <label for="m-zh-cndocsexampleshttps2http-check"><a href="/zh-cn/docs/examples/https2http/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexampleshttps2http"><span class="">为本地 HTTP 服务启用 HTTPS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesstcp-li">
  <input type="checkbox" id="m-zh-cndocsexamplesstcp-check"/>
  <label for="m-zh-cndocsexamplesstcp-check"><a href="/zh-cn/docs/examples/stcp/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesstcp"><span class="">安全地暴露内网服务</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesxtcp-li">
  <input type="checkbox" id="m-zh-cndocsexamplesxtcp-check"/>
  <label for="m-zh-cndocsexamplesxtcp-check"><a href="/zh-cn/docs/examples/xtcp/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesxtcp"><span class="">点对点内网穿透</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsexamplesvirtualnet-li">
  <input type="checkbox" id="m-zh-cndocsexamplesvirtualnet-check"/>
  <label for="m-zh-cndocsexamplesvirtualnet-check"><a href="/zh-cn/docs/examples/virtualnet/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsexamplesvirtualnet"><span class="">虚拟网络 (VirtualNet)</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-zh-cndocsfeatures-li">
  <input type="checkbox" id="m-zh-cndocsfeatures-check" checked/>
  <label for="m-zh-cndocsfeatures-check"><a href="/zh-cn/docs/features/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfeatures"><span class="">功能特性</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-zh-cndocsfeaturescommon-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommon-check" checked/>
  <label for="m-zh-cndocsfeaturescommon-check"><a href="/zh-cn/docs/features/common/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfeaturescommon"><span class="">通用功能</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonconfigure-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonconfigure-check"/>
  <label for="m-zh-cndocsfeaturescommonconfigure-check"><a href="/zh-cn/docs/features/common/configure/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonconfigure"><span class="">配置文件</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonmonitor-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonmonitor-check"/>
  <label for="m-zh-cndocsfeaturescommonmonitor-check"><a href="/zh-cn/docs/features/common/monitor/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonmonitor"><span class="">监控</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonauthentication-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonauthentication-check"/>
  <label for="m-zh-cndocsfeaturescommonauthentication-check"><a href="/zh-cn/docs/features/common/authentication/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonauthentication"><span class="">身份认证</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonui-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonui-check"/>
  <label for="m-zh-cndocsfeaturescommonui-check"><a href="/zh-cn/docs/features/common/ui/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonui"><span class="">Web 界面</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-zh-cndocsfeaturescommonnetwork-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonnetwork-check"/>
  <label for="m-zh-cndocsfeaturescommonnetwork-check"><a href="/zh-cn/docs/features/common/network/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfeaturescommonnetwork"><span class="">通信安全及优化</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonnetworknetwork-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonnetworknetwork-check"/>
  <label for="m-zh-cndocsfeaturescommonnetworknetwork-check"><a href="/zh-cn/docs/features/common/network/network/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonnetworknetwork"><span class="">通信安全及优化</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonnetworknetwork-tls-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonnetworknetwork-tls-check"/>
  <label for="m-zh-cndocsfeaturescommonnetworknetwork-tls-check"><a href="/zh-cn/docs/features/common/network/network-tls/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonnetworknetwork-tls"><span class="">自定义 TLS 协议加密</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonload-balancer-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonload-balancer-check"/>
  <label for="m-zh-cndocsfeaturescommonload-balancer-check"><a href="/zh-cn/docs/features/common/load-balancer/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonload-balancer"><span class="">负载均衡与健康检查</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonrealip-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonrealip-check"/>
  <label for="m-zh-cndocsfeaturescommonrealip-check"><a href="/zh-cn/docs/features/common/realip/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonrealip"><span class="">获取用户真实 IP</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonrange-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonrange-check"/>
  <label for="m-zh-cndocsfeaturescommonrange-check"><a href="/zh-cn/docs/features/common/range/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonrange"><span class="">端口范围映射</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonclient-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonclient-check"/>
  <label for="m-zh-cndocsfeaturescommonclient-check"><a href="/zh-cn/docs/features/common/client/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonclient"><span class="">客户端</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonserver-manage-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonserver-manage-check"/>
  <label for="m-zh-cndocsfeaturescommonserver-manage-check"><a href="/zh-cn/docs/features/common/server-manage/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonserver-manage"><span class="">服务端管理</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonclient-plugin-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonclient-plugin-check"/>
  <label for="m-zh-cndocsfeaturescommonclient-plugin-check"><a href="/zh-cn/docs/features/common/client-plugin/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonclient-plugin"><span class="">客户端插件</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-zh-cndocsfeaturescommonserver-plugin-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonserver-plugin-check" checked/>
  <label for="m-zh-cndocsfeaturescommonserver-plugin-check"><a href="/zh-cn/docs/features/common/server-plugin/" class="align-left ps-0  active td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonserver-plugin"><span class="td-sidebar-nav-active-item">服务端插件</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonssh-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonssh-check"/>
  <label for="m-zh-cndocsfeaturescommonssh-check"><a href="/zh-cn/docs/features/common/ssh/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonssh"><span class="">SSH Tunnel Gateway</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturescommonvirtualnet-li">
  <input type="checkbox" id="m-zh-cndocsfeaturescommonvirtualnet-check"/>
  <label for="m-zh-cndocsfeaturescommonvirtualnet-check"><a href="/zh-cn/docs/features/common/virtualnet/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeaturescommonvirtualnet"><span class="">虚拟网络 (VirtualNet)</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturestcp-udp-li">
  <input type="checkbox" id="m-zh-cndocsfeaturestcp-udp-check"/>
  <label for="m-zh-cndocsfeaturestcp-udp-check"><a href="/zh-cn/docs/features/tcp-udp/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfeaturestcp-udp"><span class="">TCP &amp; UDP</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-zh-cndocsfeatureshttp-https-li">
  <input type="checkbox" id="m-zh-cndocsfeatureshttp-https-check"/>
  <label for="m-zh-cndocsfeatureshttp-https-check"><a href="/zh-cn/docs/features/http-https/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfeatureshttp-https"><span class="">HTTP &amp; HTTPS</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeatureshttp-httpsheader-li">
  <input type="checkbox" id="m-zh-cndocsfeatureshttp-httpsheader-check"/>
  <label for="m-zh-cndocsfeatureshttp-httpsheader-check"><a href="/zh-cn/docs/features/http-https/header/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeatureshttp-httpsheader"><span class="">修改 HTTP 请求 Header</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeatureshttp-httpsauth-li">
  <input type="checkbox" id="m-zh-cndocsfeatureshttp-httpsauth-check"/>
  <label for="m-zh-cndocsfeatureshttp-httpsauth-check"><a href="/zh-cn/docs/features/http-https/auth/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeatureshttp-httpsauth"><span class="">设置 BasicAuth 鉴权</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeatureshttp-httpssubdomain-li">
  <input type="checkbox" id="m-zh-cndocsfeatureshttp-httpssubdomain-check"/>
  <label for="m-zh-cndocsfeatureshttp-httpssubdomain-check"><a href="/zh-cn/docs/features/http-https/subdomain/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeatureshttp-httpssubdomain"><span class="">自定义二级域名</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeatureshttp-httpsroute-li">
  <input type="checkbox" id="m-zh-cndocsfeatureshttp-httpsroute-check"/>
  <label for="m-zh-cndocsfeatureshttp-httpsroute-check"><a href="/zh-cn/docs/features/http-https/route/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsfeatureshttp-httpsroute"><span class="">路由</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturesstcp-sudp-li">
  <input type="checkbox" id="m-zh-cndocsfeaturesstcp-sudp-check"/>
  <label for="m-zh-cndocsfeaturesstcp-sudp-check"><a href="/zh-cn/docs/features/stcp-sudp/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfeaturesstcp-sudp"><span class="">STCP &amp; SUDP</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturesxtcp-li">
  <input type="checkbox" id="m-zh-cndocsfeaturesxtcp-check"/>
  <label for="m-zh-cndocsfeaturesxtcp-check"><a href="/zh-cn/docs/features/xtcp/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfeaturesxtcp"><span class="">XTCP</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfeaturestcpmux-li">
  <input type="checkbox" id="m-zh-cndocsfeaturestcpmux-check"/>
  <label for="m-zh-cndocsfeaturestcpmux-check"><a href="/zh-cn/docs/features/tcpmux/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfeaturestcpmux"><span class="">TCPMUX</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-zh-cndocsreference-li">
  <input type="checkbox" id="m-zh-cndocsreference-check"/>
  <label for="m-zh-cndocsreference-check"><a href="/zh-cn/docs/reference/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsreference"><span class="">参考</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsreferencecommon-li">
  <input type="checkbox" id="m-zh-cndocsreferencecommon-check"/>
  <label for="m-zh-cndocsreferencecommon-check"><a href="/zh-cn/docs/reference/common/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsreferencecommon"><span class="">通用配置</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsreferenceserver-configures-li">
  <input type="checkbox" id="m-zh-cndocsreferenceserver-configures-check"/>
  <label for="m-zh-cndocsreferenceserver-configures-check"><a href="/zh-cn/docs/reference/server-configures/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsreferenceserver-configures"><span class="">服务端配置</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsreferenceclient-configures-li">
  <input type="checkbox" id="m-zh-cndocsreferenceclient-configures-check"/>
  <label for="m-zh-cndocsreferenceclient-configures-check"><a href="/zh-cn/docs/reference/client-configures/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsreferenceclient-configures"><span class="">客户端配置</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsreferenceproxy-li">
  <input type="checkbox" id="m-zh-cndocsreferenceproxy-check"/>
  <label for="m-zh-cndocsreferenceproxy-check"><a href="/zh-cn/docs/reference/proxy/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsreferenceproxy"><span class="">代理配置</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsreferencevisitor-li">
  <input type="checkbox" id="m-zh-cndocsreferencevisitor-check"/>
  <label for="m-zh-cndocsreferencevisitor-check"><a href="/zh-cn/docs/reference/visitor/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsreferencevisitor"><span class="">访问者配置</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsreferenceclient-plugin-li">
  <input type="checkbox" id="m-zh-cndocsreferenceclient-plugin-check"/>
  <label for="m-zh-cndocsreferenceclient-plugin-check"><a href="/zh-cn/docs/reference/client-plugin/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsreferenceclient-plugin"><span class="">客户端插件配置</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsreferencevisitor-plugin-li">
  <input type="checkbox" id="m-zh-cndocsreferencevisitor-plugin-check"/>
  <label for="m-zh-cndocsreferencevisitor-plugin-check"><a href="/zh-cn/docs/reference/visitor-plugin/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-zh-cndocsreferencevisitor-plugin"><span class="">访问者插件配置</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-zh-cndocsfaq-li">
  <input type="checkbox" id="m-zh-cndocsfaq-check"/>
  <label for="m-zh-cndocsfaq-check"><a href="/zh-cn/docs/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-zh-cndocsfaq"><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/gofrp/frp-doc/tree/master/content/zh-cn/docs/Features/common/server-plugin.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> 查看页面源码</a>
  <a href="https://github.com/gofrp/frp-doc/edit/master/content/zh-cn/docs/Features/common/server-plugin.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 编辑此页</a>
  <a href="https://github.com/gofrp/frp-doc/new/master/content/zh-cn/docs/Features/common?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 添加子页面</a>
  <a href="https://github.com/gofrp/frp-doc/issues/new?title=%e6%9c%8d%e5%8a%a1%e7%ab%af%e6%8f%92%e4%bb%b6" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> 提交文档问题</a>
  <a href="https://github.com/fatedier/frp/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> 提交项目问题</a>
  
</div>

            <div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#rpc-请求">RPC 请求</a></li>
    <li><a href="#接口">接口</a></li>
    <li><a href="#操作类型">操作类型</a>
      <ul>
        <li><a href="#login">Login</a></li>
        <li><a href="#newproxy">NewProxy</a></li>
        <li><a href="#closeproxy">CloseProxy</a></li>
        <li><a href="#ping">Ping</a></li>
        <li><a href="#newworkconn">NewWorkConn</a></li>
        <li><a href="#newuserconn">NewUserConn</a></li>
      </ul>
    </li>
    <li><a href="#frps-中插件配置">frps 中插件配置</a></li>
    <li><a href="#元数据">元数据</a></li>
  </ul>
</nav></div>

            
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/zh-cn/docs/">文档</a></li>
  <li class="breadcrumb-item">
    <a href="/zh-cn/docs/features/">功能特性</a></li>
  <li class="breadcrumb-item">
    <a href="/zh-cn/docs/features/common/">通用功能</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    服务端插件</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>服务端插件</h1>
	
	<header class="article-meta">
		
  </header>
	<p>frp 服务端插件的作用是在不侵入自身代码的前提下，扩展 frp 服务端的能力。</p>
<p>frp 服务端插件会以单独进程的形式运行，并且监听在一个端口上，对外提供 RPC 接口，响应 frps 的请求。</p>
<p>frps 在执行某些操作前，会根据配置向服务端插件发送 RPC 请求，根据插件的响应来执行相应的操作。</p>
<h2 id="rpc-请求">RPC 请求</h2>
<p>服务端插件接收到操作请求后，可以给出三种回应。</p>
<ul>
<li>拒绝操作，需要返回拒绝操作的原因。</li>
<li>允许操作，不需要修改操作内容。</li>
<li>允许操作，对操作请求进行修改后，返回修改后的内容。</li>
</ul>
<h2 id="接口">接口</h2>
<p>接口路径可以在 frps 配置中为每个插件单独配置，这里以 <code>/handler</code> 为例。</p>
<p>Request</p>
<pre tabindex="0"><code>POST /handler?version=0.1.0&amp;op=Login
{
    &#34;content&#34;: {
        ... // 具体的操作信息
    }
}

请求 Header
X-Frp-Reqid: 用于追踪请求
</code></pre><p>Response</p>
<p>非 200 的返回都认为是请求异常。</p>
<p>拒绝执行操作</p>
<pre tabindex="0"><code>{
    &#34;reject&#34;: true,
    &#34;reject_reason&#34;: &#34;invalid user&#34;
}
</code></pre><p>允许且内容不需要变动</p>
<pre tabindex="0"><code>{
    &#34;reject&#34;: false,
    &#34;unchange&#34;: true
}
</code></pre><p>允许且需要替换操作内容</p>
<pre tabindex="0"><code>{
    &#34;unchange&#34;: false,
    &#34;content&#34;: {
        ... // 替换后的操作信息，格式必须和请求时的一致
    }
}
</code></pre><h2 id="操作类型">操作类型</h2>
<p>目前插件支持管理的操作类型有 <code>Login</code>、<code>NewProxy</code>、<code>CloseProxy</code>、<code>Ping</code>、<code>NewWorkConn</code> 和 <code>NewUserConn</code>。</p>
<h3 id="login">Login</h3>
<p>用户登录操作信息</p>
<pre tabindex="0"><code>{
    &#34;content&#34;: {
        &#34;version&#34;: &lt;string&gt;,
        &#34;hostname&#34;: &lt;string&gt;,
        &#34;os&#34;: &lt;string&gt;,
        &#34;arch&#34;: &lt;string&gt;,
        &#34;user&#34;: &lt;string&gt;,
        &#34;timestamp&#34;: &lt;int64&gt;,
        &#34;privilege_key&#34;: &lt;string&gt;,
        &#34;run_id&#34;: &lt;string&gt;,
        &#34;pool_count&#34;: &lt;int&gt;,
        &#34;metas&#34;: map&lt;string&gt;string,
        &#34;client_address&#34;: &lt;string&gt;
    }
}
</code></pre><h3 id="newproxy">NewProxy</h3>
<p>创建代理的相关信息</p>
<pre tabindex="0"><code>{
    &#34;content&#34;: {
        &#34;user&#34;: {
            &#34;user&#34;: &lt;string&gt;,
            &#34;metas&#34;: map&lt;string&gt;string
            &#34;run_id&#34;: &lt;string&gt;
        },
        &#34;proxy_name&#34;: &lt;string&gt;,
        &#34;proxy_type&#34;: &lt;string&gt;,
        &#34;use_encryption&#34;: &lt;bool&gt;,
        &#34;use_compression&#34;: &lt;bool&gt;,
        &#34;bandwidth_limit&#34;: &lt;string&gt;,
        &#34;bandwidth_limit_mode&#34;: &lt;string&gt;,
        &#34;group&#34;: &lt;string&gt;,
        &#34;group_key&#34;: &lt;string&gt;,

        // tcp and udp only
        &#34;remote_port&#34;: &lt;int&gt;,

        // http and https only
        &#34;custom_domains&#34;: []&lt;string&gt;,
        &#34;subdomain&#34;: &lt;string&gt;,
        &#34;locations&#34;: []&lt;string&gt;,
        &#34;http_user&#34;: &lt;string&gt;,
        &#34;http_pwd&#34;: &lt;string&gt;,
        &#34;host_header_rewrite&#34;: &lt;string&gt;,
        &#34;headers&#34;: map&lt;string&gt;string,

        // stcp only
        &#34;sk&#34;: &lt;string&gt;,

        // tcpmux only
        &#34;multiplexer&#34;: &lt;string&gt;

        &#34;metas&#34;: map&lt;string&gt;string
    }
}
</code></pre><h3 id="closeproxy">CloseProxy</h3>
<p>代理关闭。(仅用于通知)</p>
<p>注意: 当单个 frpc 会注册大量 proxy 时，慎重使用此接口，可能会由于连接数超限而影响服务的可用性。</p>
<pre tabindex="0"><code>{
    &#34;content&#34;: {
        &#34;user&#34;: {
            &#34;user&#34;: &lt;string&gt;,
            &#34;metas&#34;: map&lt;string&gt;string
            &#34;run_id&#34;: &lt;string&gt;
        },
        &#34;proxy_name&#34;: &lt;string&gt;
    }
}
</code></pre><h3 id="ping">Ping</h3>
<p>心跳相关信息</p>
<pre tabindex="0"><code>{
    &#34;content&#34;: {
        &#34;user&#34;: {
            &#34;user&#34;: &lt;string&gt;,
            &#34;metas&#34;: map&lt;string&gt;string
            &#34;run_id&#34;: &lt;string&gt;
        },
        &#34;timestamp&#34;: &lt;int64&gt;,
        &#34;privilege_key&#34;: &lt;string&gt;
    }
}
</code></pre><h3 id="newworkconn">NewWorkConn</h3>
<p>创建工作连接</p>
<pre tabindex="0"><code>{
    &#34;content&#34;: {
        &#34;user&#34;: {
            &#34;user&#34;: &lt;string&gt;,
            &#34;metas&#34;: map&lt;string&gt;string
            &#34;run_id&#34;: &lt;string&gt;
        },
        &#34;run_id&#34;: &lt;string&gt;
        &#34;timestamp&#34;: &lt;int64&gt;,
        &#34;privilege_key&#34;: &lt;string&gt;
    }
}
</code></pre><h3 id="newuserconn">NewUserConn</h3>
<p>创建用户连接 (支持 <code>tcp</code>、<code>stcp</code>、<code>https</code> 和 <code>tcpmux</code> 协议)。</p>
<pre tabindex="0"><code>{
    &#34;content&#34;: {
        &#34;user&#34;: {
            &#34;user&#34;: &lt;string&gt;,
            &#34;metas&#34;: map&lt;string&gt;string
            &#34;run_id&#34;: &lt;string&gt;
        },
        &#34;proxy_name&#34;: &lt;string&gt;,
        &#34;proxy_type&#34;: &lt;string&gt;,
        &#34;remote_addr&#34;: &lt;string&gt;
    }
}
</code></pre><h2 id="frps-中插件配置">frps 中插件配置</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="nx">bindPort</span> <span class="p">=</span> <span class="mi">7000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">httpPlugins</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;user-manager&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">addr</span> <span class="p">=</span> <span class="s2">&#34;127.0.0.1:9000&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">path</span> <span class="p">=</span> <span class="s2">&#34;/handler&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ops</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;Login&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">httpPlugins</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;port-manager&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">addr</span> <span class="p">=</span> <span class="s2">&#34;127.0.0.1:9001&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">path</span> <span class="p">=</span> <span class="s2">&#34;/handler&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ops</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;NewProxy&#34;</span><span class="p">]</span>
</span></span></code></pre></div><ul>
<li>addr: 插件监听的网络地址，支持 HTTP 和 HTTPS，默认为 HTTP。</li>
<li>path: 插件监听的请求路径。</li>
<li>ops: 插件需要处理的操作列表，多个 op 以英文逗号分隔。</li>
<li>tls_verify: 如果是 HTTPS 协议，支持忽略 TLS 身份验证。</li>
</ul>
<h2 id="元数据">元数据</h2>
<p>为了减少 frps 的代码修改，同时提高管理插件的扩展能力，在 frpc 的配置文件中引入自定义元数据的概念。元数据会在调用 RPC 请求时发送给插件。</p>
<p>有两种类型的元数据条目，全局条目和每个代理配置下的条目。全局元数据将在客户端登录时附加在 Login 请求中，并在其他 RPC 请求中附加在 <code>user.metas</code> 中。</p>
<p>每个代理配置下的元数据条目仅会在 NewProxy 操作中通过 metas 传递。</p>
<pre tabindex="0"><code># frpc.toml
serverAddr = &#34;127.0.0.1&#34;
serverPort = 7000
user = &#34;fake&#34;
metadatas.token = &#34;fake&#34;
metadatas.version = &#34;1.0.0&#34;

[[proxies]]
name = &#34;ssh&#34;
type = &#34;tcp&#34;
localPort = 22
remotePort = 6000
metadatas.id = &#34;123&#34;
</code></pre>
	<div class="td-page-meta__lastmod">
  最后修改 July 18, 2025: <a href="https://github.com/gofrp/frp-doc/commit/0cd833eff84f1b68564de06b8d9413aef3e523b7">add en contents (#99) (0cd833e)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/fatedier/frp" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025
    <span class="td-footer__authors">The frp Authors</span></span><span class="td-footer__all_rights_reserved">保留所有权利</span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.f72d00502781aaf278a14088eb2356b1ba2a05ad698a0c43fe86314d74ceab56.js" integrity="sha256-9y0AUCeBqvJ4oUCI6yNWsboqBa1pigxD/oYxTXTOq1Y=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>